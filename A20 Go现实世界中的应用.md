## 第二十章 Go现实世界中的应用

在下面的章节中，我们将讨论 Go 的一些实际使用案例：我们将探索许多在当今实际商业项目中使用 Go 构建的应用程序，并指出为什么 Go 在这些领域中会被选中。考虑到语言在本书出版时才公开 2 年，所以企业在构建初始项目时使用一种新语言通常是不被认可的。

### 20.1 MROffice — Go 实现的 VOIP 系统

Dailer 的第一个版本使用 python 开发，按他的经验来说，针对长时间运行的服务器进程， Python 作为动态脚本语言可能不是一个好的选择。出现的很多运行错误本应可以在编译时被捕获。

正如 Varekamp 先生在 Sydney Go 用户组（ 2011 年 3 月）所说：“当 Go 出现时，它立即对我有意义：输入安全，编译，感觉就像一个脚本语言。” 所以他将 Python 代码移植到了 Go 。 Go 的并发模型适合这种问题： goroutine 开始处理每个调用，采访者和受访者，所有这些都通过频道进行通信。http 库和 websocket 库让编写管理 UI 变得更为容易。

这个产品现在在多个电话中心运行着，并且正在使用神经网络进行预测拨号器的设计。



### 20.2 Atlassian— 虚拟机集群管理系统

www.atlassian.com/

在 Atlassian， Go 被用于支持并发的实用程序设计，用于配置和监控测试服务器。他们为软件开发人员制作开发和协作工具，主要是 Java 商店。他们有一个用于测试的虚拟机集群，运行大量无盘主机。它的配置和监控系统是用 Go 开发的，系统由 3 部分组成：

- 运行于每台服务器上的代理进程，广播虚拟机的状态。
- 一个管理进程，收听代理的广播，在代理失败没有发送报告时执行指定的动作。
- 一个命令行工具用于向管理进程传递命令。

**代理使用 protocol buffer 协议来编码它读到的状态信息，并通过 UDP 协议广播。管理进程读取配置文件，为集群中的每个虚拟机启动一个 goroutine 。每个 goroutine 监听对应的虚拟机的通告，并发出指令（shell 命令）使其保持正确的状态。**

为什么用 Go ：根据配置，可以一个 goroutine 对应一台虚拟机。

系统非常容易部署，只需要安装二进制文件，并且没有依赖。

Dave Cheney，Atlassian 工程师说：「代理运行在从网络启动并且完全依靠内存运行的机器上，一个二进行制文件，对比 JVM 或 Python 运行时，能够节省更多的资源」。



### 20.3 Camlistore 个人住址存储系统

[camlistore.org/](http://camlistore.org/)

在 Camlistore 中，从数据存储到 UI，Go 在进行「全栈」编程。

该系统由 BradFitzpatrick 开发，用于在云上存储个人数据，并与朋友和公众共享这些数据。它由可寻址的数据存储、同步和访问控制、API、用户界面、个人「Web 主目录」组成。

它由多种语言编写，其中最大的部分是用 Go 写的。它包括一个大数据服务器、一个 HTTP 服务器、一个 HTTP 用户界面和一些命令行工具。

它可以用于：

- 个人数据备份，自动同步到远程服务器。
- Dropbox 风格的跨机器文件同步。
- 照片管理和分享。
- 网站内容管理。

以下是 Brad 对这个 Go 项目的一些评论：

「我在很短的时间内写出了很多快速、正确、可维护、可测试的代码，没有太多代码量。很多年没有一种语言让我这么兴奋了。我很久以前就有了 Camlistore 这个项目的想法，但在我学习 Go 语言之前，它显得太让人痛苦了。」

